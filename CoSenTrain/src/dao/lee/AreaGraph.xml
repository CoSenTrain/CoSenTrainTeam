<?xml version="1.0" encoding="EUC-KR"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bean.lee.AreaGraphBean">

	<select id="selectGraphSrc" resultType="areaGraph">
		SELECT SRC startArea, COUNT(SRC) count,ROUND(COUNT(SRC)/SUM(COUNT(SRC))OVER()*100,2) persent
		FROM RUNNINGSCHEDULE R, ROUTE RO 
		WHERE R.ROUTENO = RO.ROUTENO 
		GROUP BY SRC
	</select>

	<select id="selectGraphDest" resultType="areaGraph">
		SELECT DEST arriveArea, COUNT(DEST) count,ROUND(COUNT(DEST)/SUM(COUNT(DEST))OVER()*100,2) persent
		FROM RUNNINGSCHEDULE R, ROUTE RO 
		WHERE R.ROUTENO = RO.ROUTENO 
		GROUP BY DEST
	</select>
</mapper>